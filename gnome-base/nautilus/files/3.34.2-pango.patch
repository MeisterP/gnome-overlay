From 83ebc624e7c08f9afa442d739dd2818a4c2f879c Mon Sep 17 00:00:00 2001
From: Poncho <poncho@spahan.ch>
Date: Tue, 3 Dec 2019 10:11:18 +0100
Subject: [PATCH] Revert "canvas-item, view-icon-item-ui: Don't hyphenate
 filenames"

This reverts commit 9738d8561ed38a87b4d72db3e49653641edd9a09.
---
 src/nautilus-canvas-item.c       | 6 ------
 src/nautilus-view-icon-item-ui.c | 6 ------
 2 files changed, 12 deletions(-)

diff --git a/src/nautilus-canvas-item.c b/src/nautilus-canvas-item.c
index 4d33d119b..42181e8c4 100644
--- a/src/nautilus-canvas-item.c
+++ b/src/nautilus-canvas-item.c
@@ -1381,14 +1381,12 @@ create_label_layout (NautilusCanvasItem *item,
     GString *str;
     char *zeroified_text;
     const char *p;
-    PangoAttrList *attr_list;
 
     canvas_item = EEL_CANVAS_ITEM (item);
 
     container = NAUTILUS_CANVAS_CONTAINER (canvas_item->canvas);
     context = gtk_widget_get_pango_context (GTK_WIDGET (canvas_item->canvas));
     layout = pango_layout_new (context);
-    attr_list = pango_attr_list_new ();
 
     zeroified_text = NULL;
 
@@ -1417,9 +1415,6 @@ create_label_layout (NautilusCanvasItem *item,
     pango_layout_set_spacing (layout, LABEL_LINE_SPACING);
     pango_layout_set_wrap (layout, PANGO_WRAP_WORD_CHAR);
 
-    pango_attr_list_insert (attr_list, pango_attr_insert_hyphens_new (FALSE));
-    pango_layout_set_attributes (layout, attr_list);
-
     /* Create a font description */
     if (container->details->font)
     {
@@ -1432,7 +1427,6 @@ create_label_layout (NautilusCanvasItem *item,
     pango_layout_set_font_description (layout, desc);
     pango_font_description_free (desc);
     g_free (zeroified_text);
-    pango_attr_list_unref (attr_list);
 
     return layout;
 }
diff --git a/src/nautilus-view-icon-item-ui.c b/src/nautilus-view-icon-item-ui.c
index d192e28fa..805c68f89 100644
--- a/src/nautilus-view-icon-item-ui.c
+++ b/src/nautilus-view-icon-item-ui.c
@@ -128,7 +128,6 @@ constructed (GObject *object)
     GtkBox *container;
     GtkBox *item_selection_background;
     GtkLabel *label;
-    PangoAttrList *attr_list;
     GtkStyleContext *style_context;
     NautilusFile *file;
     guint icon_size;
@@ -150,9 +149,6 @@ constructed (GObject *object)
 
     label = GTK_LABEL (gtk_label_new (nautilus_file_get_display_name (file)));
     gtk_widget_show (GTK_WIDGET (label));
-    attr_list = pango_attr_list_new ();
-    pango_attr_list_insert (attr_list, pango_attr_insert_hyphens_new (FALSE));
-    gtk_label_set_attributes (label, attr_list);
     gtk_label_set_ellipsize (label, PANGO_ELLIPSIZE_MIDDLE);
     gtk_label_set_line_wrap (label, TRUE);
     gtk_label_set_line_wrap_mode (label, PANGO_WRAP_WORD_CHAR);
@@ -182,8 +178,6 @@ constructed (GObject *object)
                       (GCallback) on_view_item_size_changed, self);
     g_signal_connect (self->model, "notify::file",
                       (GCallback) on_view_item_file_changed, self);
-
-    pango_attr_list_unref (attr_list);
 }
 
 static void
-- 
2.23.0

