From aff235b797c2428a374bd1b1bbeccb8c940988c9 Mon Sep 17 00:00:00 2001
From: Mart Raudsepp <leio@gentoo.org>
Date: Mon, 11 Mar 2019 23:23:11 +0200
Subject: [PATCH 3/3] Sync gnome-desktop code

Brings in fontconfig cache bind mount and a small memory fix; cache path hardcoded to Gentoo for now
---
 src/gnome-desktop/gnome-desktop-thumbnail-script.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/gnome-desktop/gnome-desktop-thumbnail-script.c b/src/gnome-desktop/gnome-desktop-thumbnail-script.c
index 8e8b87653..331291e47 100644
--- a/src/gnome-desktop/gnome-desktop-thumbnail-script.c
+++ b/src/gnome-desktop/gnome-desktop-thumbnail-script.c
@@ -566,8 +566,8 @@ add_bwrap (GPtrArray   *array,
     }
 
   /* fontconfig cache if necessary */
-  if (!g_str_has_prefix (FONTCONFIG_CACHE_PATH, "/usr/"))
-    add_args (array, "--ro-bind-try", FONTCONFIG_CACHE_PATH, FONTCONFIG_CACHE_PATH, NULL);
+  if (!g_str_has_prefix ("/var/cache/fontconfig", "/usr/"))
+    add_args (array, "--ro-bind-try", "/var/cache/fontconfig", "/var/cache/fontconfig", NULL);
 
   add_args (array,
 	    "--proc", "/proc",
-- 
2.21.0

