From 1a2f9b5f6b932f04ecf126648e1a9e1912a72a1b Mon Sep 17 00:00:00 2001
From: Poncho <poncho@spahan.ch>
Date: Sat, 17 Mar 2018 10:39:07 +0100
Subject: [PATCH 2/4] make NetworkManager optional

---
 meson.build       | 1 -
 meson_options.txt | 2 +-
 2 files changed, 1 insertion(+), 2 deletions(-)

diff --git a/meson.build b/meson.build
index 7c98d6d7..d77f0b26 100644
--- a/meson.build
+++ b/meson.build
@@ -194,7 +194,6 @@ endif
 
 # Sharing plugin
 enable_network_manager = get_option('network_manager')
-assert(enable_network_manager or not host_is_linux, 'NetworkManager support is not optional on Linux platforms')
 if enable_network_manager
   # network manager
   libnm_dep = dependency('libnm', version: '>= 1.0')
diff --git a/meson_options.txt b/meson_options.txt
index 0ba79b18..c3bbd03d 100644
--- a/meson_options.txt
+++ b/meson_options.txt
@@ -4,7 +4,7 @@ option('udev_dir', type: 'string', value: '', description: 'Absolute path of the
 option('alsa', type: 'boolean', value: true, description: 'build with ALSA support (not optional on Linux platforms)')
 option('gudev', type: 'boolean', value: true, description: 'build with gudev device support (not optional on Linux platforms)')
 option('cups', type: 'boolean', value: true, description: 'build with CUPS support')
-option('network_manager', type: 'boolean', value: true, description: 'build with NetworkManager support (not optional on Linux platforms)')
+option('network_manager', type: 'boolean', value: true, description: 'build with NetworkManager support')
 option('rfkill', type: 'boolean', value: true, description: 'build with rfkill support (not optional on Linux platforms)')
 option('smartcard', type: 'boolean', value: true, description: 'build with smartcard support')
 option('wayland', type: 'boolean', value: true, description: 'build with Wayland support')
-- 
2.18.0

