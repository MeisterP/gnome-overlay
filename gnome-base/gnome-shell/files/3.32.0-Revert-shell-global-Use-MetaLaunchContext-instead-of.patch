From 42861de705795a47dbb2de2f1465cd62d7871a49 Mon Sep 17 00:00:00 2001
From: Poncho <poncho@spahan.ch>
Date: Wed, 27 Mar 2019 09:16:12 +0100
Subject: [PATCH] Revert "shell-global: Use MetaLaunchContext instead of
 GdkLaunchContext"

This reverts commit b597d5faf05d87b010a0e8fc96e76f44399c910b.
---
 src/shell-global.c | 22 ++++++++++------------
 1 file changed, 10 insertions(+), 12 deletions(-)

diff --git a/src/shell-global.c b/src/shell-global.c
index df84b6b0d..c3b2555aa 100644
--- a/src/shell-global.c
+++ b/src/shell-global.c
@@ -1382,26 +1382,24 @@ shell_global_create_app_launch_context (ShellGlobal *global,
                                         guint32      timestamp,
                                         int          workspace)
 {
-  MetaWorkspaceManager *workspace_manager = global->workspace_manager;
-  MetaStartupNotification *sn;
-  MetaLaunchContext *context;
-  MetaWorkspace *ws = NULL;
+  GdkAppLaunchContext *context;
 
-  sn = meta_display_get_startup_notification (global->meta_display);
-  context = meta_startup_notification_create_launcher (sn);
+  context = gdk_display_get_app_launch_context (global->gdk_display);
 
   if (timestamp == 0)
     timestamp = shell_global_get_current_time (global);
-  meta_launch_context_set_timestamp (context, timestamp);
+  gdk_app_launch_context_set_timestamp (context, timestamp);
 
   if (workspace < 0)
-    ws = meta_workspace_manager_get_active_workspace (workspace_manager);
-  else
-    ws = meta_workspace_manager_get_workspace_by_index (workspace_manager, workspace);
+    {
+      MetaWorkspaceManager *workspace_manager = global->workspace_manager;
 
-  meta_launch_context_set_workspace (context, ws);
+      workspace =
+        meta_workspace_manager_get_active_workspace_index (workspace_manager);
+    }
+  gdk_app_launch_context_set_desktop (context, workspace);
 
-  return (GAppLaunchContext *) context;
+  return (GAppLaunchContext *)context;
 }
 
 typedef struct
-- 
2.19.2

